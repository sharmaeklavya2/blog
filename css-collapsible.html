<!DOCTYPE html>
<html lang="en">
<head>
<title>Eklavya's Blog - Making a keyboard-navigable collapsible without JavaScript</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://sharmaeklavya2.github.io/blog/theme/base.css" />
<meta name="description" content="A 'collapsible' is content whose visibility can be toggled by clicking something. However, users without a mouse should also be able to open the collapsed content. This article explains how to make a keyboard-navigable collapsible without using JavaScript." />
<meta name="keywords" content="Front-end web dev,Tutorial" />
<link rel="stylesheet" href="https://sharmaeklavya2.github.io/blog/css/collapsible.css" />
<link rel="stylesheet" href="https://sharmaeklavya2.github.io/blog/css/pygments-manni.css" />
</head>

<body>
<nav>
<div class="primary">
<a id="sitetitle" href="https://sharmaeklavya2.github.io/blog/">Eklavya's Blog</a>
<label for="nav-checkbox" class="collapsor-lbl">&equiv;</label>
</div>
<div class="focus-capturer" tabindex="0">
<input id="nav-checkbox" class="collapsor" type="checkbox" />
<div class="collapsible">
<ul>
<li><a href="https://sharmaeklavya2.github.io">About me</a></li>
<li><a href="https://sharmaeklavya2.github.io/blog/pages/about-this-blog.html">About this blog</a></li>
<li><ul class="tags">
<li>Feed:</li>
<li><a type="application/type+xml" rel="alternate" class="hori-flex" href="https://sharmaeklavya2.github.io/blog/feed/all.rss.xml">
<svg class="icon"><use xlink:href="https://sharmaeklavya2.github.io/blog/theme/sprites.svg#fa-rss-square"/></svg><span>RSS</span>
</a></li>
<li><a type="application/type+xml" rel="alternate" class="hori-flex" href="https://sharmaeklavya2.github.io/blog/feed/all.atom.xml">
<svg class="icon"><use xlink:href="https://sharmaeklavya2.github.io/blog/theme/sprites.svg#fa-rss-square"/></svg><span>Atom</span>
</a></li>
</ul></li>
</ul>
<p>Tags</p>
<ul>
<li><a href="https://sharmaeklavya2.github.io/blog/tag/cs.html">CS <span class="article-count">1</span></a></li>
<li><a href="https://sharmaeklavya2.github.io/blog/tag/algorithms.html">Algorithms <span class="article-count">1</span></a></li>
<li><a href="https://sharmaeklavya2.github.io/blog/tag/math.html">Math <span class="article-count">1</span></a></li>
<li><a href="https://sharmaeklavya2.github.io/blog/tag/abstract-algebra.html">Abstract Algebra <span class="article-count">1</span></a></li>
<li><a href="https://sharmaeklavya2.github.io/blog/tag/tutorial.html">Tutorial <span class="article-count">4</span></a></li>
<li><a href="https://sharmaeklavya2.github.io/blog/tag/front-end-web-dev.html">Front-end web dev <span class="article-count">1</span></a></li>
<li><a href="https://sharmaeklavya2.github.io/blog/tag/juggling.html">Juggling <span class="article-count">3</span></a></li>
<li><a href="https://sharmaeklavya2.github.io/blog/tag/about-me.html">About Me <span class="article-count">2</span></a></li>
</ul>
</div>
</div>
</nav>

<div id="main">
<article id="content" class="body">
<h1 class="entry-title">Making a keyboard-navigable collapsible without JavaScript</h1>
<table class="post-details">
<tr><td>Published</td>
<td><time class="published" datetime="2018-11-01T00:00:00+05:30">
01 Nov 2018</time></td></tr>
<tr><td>Tags</td>
<td><ul class="tags">
<li><a href="https://sharmaeklavya2.github.io/blog/tag/front-end-web-dev.html">Front-end web dev</a></li>
<li><a href="https://sharmaeklavya2.github.io/blog/tag/tutorial.html">Tutorial</a></li>
</ul></td></tr>
</table>
<div class="entry-content">
<p>A 'collapsible' is content whose visibility can be toggled. Here is an example:</p>
<div class="collapsible" style="clear: both">
    <label for="checkbox0" class="collapsor-lbl"> Click me </label>
    <div class="focus-capturer" tabindex="0">
        <input id="checkbox0" class="collapsor" type="checkbox" />
        <div class="collapsible-content">
            <p>This is the body of the collapsible. Its visibility can be toggled using the 'click me' button.</p>
            <p>Here we will learn how to make such a collapsible without using JavaScript.</p>
        </div>
    </div>
</div>

<p>In this article, we'll look at how to make one.</p>
<div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#skeleton">Skeleton</a></li>
<li><a href="#collapsibility">Collapsibility</a></li>
<li><a href="#accessibility">Accessibility</a></li>
<li><a href="#use">Use</a></li>
</ul>
</div>
<h2 id="skeleton">Skeleton<a class="headerlink" href="#skeleton" title="Permanent link">&para;</a></h2>
<p>Let's first create the basic structure without collapsibility.</p>
<p>HTML:</p>
<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;collapsible&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;collapsor-lbl&quot;</span><span class="nt">&gt;</span> Click me <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;collapsible-content&quot;</span><span class="nt">&gt;</span>
        This is the body of the collapsible.
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>


<p>CSS (for beautification):</p>
<div class="codehilite"><pre><span class="nc">.collapsible</span> <span class="p">{</span>
    <span class="k">max-width</span><span class="o">:</span> <span class="m">40em</span><span class="p">;</span>
    <span class="k">border</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="nb">black</span><span class="p">;</span>
    <span class="k">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span> <span class="m">0</span><span class="o">.</span><span class="m">5</span><span class="n">rem</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.collapsor-lbl</span><span class="nd">:hover</span> <span class="p">{</span>
    <span class="k">background-color</span><span class="o">:</span> <span class="n">rgba</span><span class="p">(</span><span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">.</span><span class="m">1</span><span class="p">);</span>
<span class="p">}</span>
<span class="nc">.collapsor-lbl</span> <span class="p">{</span>
    <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
    <span class="k">padding</span><span class="o">:</span> <span class="m">0</span><span class="o">.</span><span class="m">5</span><span class="n">rem</span> <span class="m">1</span><span class="n">rem</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.collapsible-content</span> <span class="p">{</span>
    <span class="k">padding</span><span class="o">:</span> <span class="m">0</span><span class="o">.</span><span class="m">5</span><span class="n">rem</span><span class="p">;</span>
    <span class="k">border-top</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="nb">black</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>This is what the output looks like:</p>
<div class="collapsible">
    <div class="collapsor-lbl"> Click me </div>
    <div class="collapsible-content" style="display: block">
        This is the body of the collapsible.
    </div>
</div>

<h2 id="collapsibility">Collapsibility<a class="headerlink" href="#collapsibility" title="Permanent link">&para;</a></h2>
<p>To add collapsibility, we're going to use a checkbox.
I read about it on the blog post
'<a href="https://alligator.io/css/collapsible/">Implementing A Pure CSS Collapsible</a>' by alligator.io.</p>
<ul>
<li>A checkbox maintains state about whether it's checked or not.
  We can use that to maintain state about whether our collapsible has been clicked or not.</li>
<li>We can use the CSS style <code>display:none</code> to make the checkbox disappear, but still retain its functionality.</li>
<li>We can use the CSS pseudo-selector <code>:checked</code> to select a checked checkbox.</li>
<li>We will make sure that <code>.collapsible-content</code> is a sibling of the checkbox.
  Then we can use the CSS sibling combinator '<code>~</code>' to select it.
  When used together with <code>:checked</code> on checkbox, we can select <code>.collapsible-content</code> only when the checkbox is checked.</li>
</ul>
<p>Change the HTML to this:</p>
<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;collapsible&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;checkbox1&quot;</span> <span class="na">class=</span><span class="s">&quot;collapsor&quot;</span> <span class="na">type=</span><span class="s">&quot;checkbox&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;checkbox1&quot;</span> <span class="na">class=</span><span class="s">&quot;collapsor-lbl&quot;</span><span class="nt">&gt;</span> Click me <span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;collapsible-content&quot;</span><span class="nt">&gt;</span>
        This is the body of the collapsible.
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>


<p>Add this CSS:</p>
<div class="codehilite"><pre><span class="nc">.collapsor-lbl</span> <span class="p">{</span>
    <span class="k">display</span><span class="o">:</span> <span class="k">block</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.collapsor</span><span class="o">,</span> <span class="nc">.collapsible-content</span> <span class="p">{</span>
    <span class="k">display</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.collapsor</span><span class="nd">:checked</span> <span class="o">~</span> <span class="nc">.collapsible-content</span> <span class="p">{</span>
    <span class="k">display</span><span class="o">:</span> <span class="k">block</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>Output:</p>
<div class="collapsible">
    <input id="checkbox1" class="collapsor" type="checkbox" />
    <label for="checkbox1" class="collapsor-lbl"> Click me </label>
    <div class="collapsible-content">
        This is the body of the collapsible.
    </div>
</div>

<h2 id="accessibility">Accessibility<a class="headerlink" href="#accessibility" title="Permanent link">&para;</a></h2>
<blockquote>
<p>Web accessibility is the inclusive practice of ensuring there are no barriers that
prevent interaction with, or access to websites, by people with disabilities.
<footer><a href="https://en.wikipedia.org/wiki/Web_accessibility">Wikipedia article on Web Accessibility</a></footer></p>
</blockquote>
<p>I once had a mouse that sometimes stopped functioning, so I can feel a bit of the pain of users who cannot use a mouse.
Also, some people <em>like</em> using the keyboard for navigation and it would be bad to force them to use a mouse.</p>
<p>I don't know much about web accessibility standards and what it takes for my websites to be fully accessible,
but the least I can do is make my pages keyboard-navigable.</p>
<p>The <a href="https://alligator.io/css/collapsible/#a-note-on-accessibility">blog post by alligator.io</a>
says how to make a collapsible using only CSS, but to make it accessible they had to use JavaScript.
I, however, have a way of doing it without JavaScript. Prepare to get enlightened!</p>
<p>When navigating a web page using the tab key, certain HTML elements have the potential of receiving focus.
This generally includes links (<code>&lt;a&gt;</code> tags) and form elements (<code>&lt;input&gt;</code> tags).
When an element receives focus, it gets the <code>:focus</code> CSS pseudo-class.
Also, that element and all its descendants get the <code>:focus-within</code> class.</p>
<p>We will therefore wrap <code>.collapsible-content</code> within a <code>&lt;div&gt;</code>.
We will make that <code>&lt;div&gt;</code> capable of receiving focus via tab by setting the attribute <code>tabindex</code> to <code>"0"</code>.
Then whenever that div has the <code>:focus-within</code> pseudo-class set,
we will set <code>display: block</code> on <code>.collapsible-content</code>.</p>
<p>Change the HTML to this:</p>
<div class="codehilite"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;collapsible&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;checkbox2&quot;</span> <span class="na">class=</span><span class="s">&quot;collapsor-lbl&quot;</span><span class="nt">&gt;</span> Click me <span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;focus-capturer&quot;</span> <span class="na">tabindex=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;checkbox2&quot;</span> <span class="na">class=</span><span class="s">&quot;collapsor&quot;</span> <span class="na">type=</span><span class="s">&quot;checkbox&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;collapsible-content&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;p&gt;</span>This is the body of the collapsible.<span class="nt">&lt;p&gt;</span>
            <span class="nt">&lt;ul&gt;</span>
                <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>link1<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
                <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>link2<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
                <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>link3<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
            <span class="nt">&lt;/ul&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>


<p>Add this CSS:</p>
<div class="codehilite"><pre><span class="nc">.focus-capturer</span><span class="nd">:focus-within</span> <span class="nc">.collapsible-content</span> <span class="p">{</span>
    <span class="k">display</span><span class="o">:</span> <span class="k">block</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>Output:</p>
<div class="collapsible">
    <label for="checkbox2" class="collapsor-lbl"> Click me </label>
    <div class="focus-capturer" tabindex="0">
        <input id="checkbox2" class="collapsor" type="checkbox" />
        <div class="collapsible-content">
            <p>This is the body of the collapsible.</p>
            <ul>
                <li><a href="">link1</a></li>
                <li><a href="">link2</a></li>
                <li><a href="">link3</a></li>
            </ul>
        </div>
    </div>
</div>

<p>Try using the tab key to navigate all the 3 links in the collapsible.
When the focus moves out of the collapsible, it closes (unless you had clicked on it to open it).</p>
<p>Navigation using Shift+Tab is a bit wonky though.</p>
<h2 id="use">Use<a class="headerlink" href="#use" title="Permanent link">&para;</a></h2>
<p>When my blog's website is viewed on a screen of size less than 800 pixels, the navigation bar moves to the top.
It becomes collapsible and users have to click the '&equiv;' button to open it.
I have used the above technique to implement this collapsible navigation bar.</p>
<p>Feel free to <a href="https://github.com/sharmaeklavya2/blog/issues/new">reach out</a>
for comments, criticism or suggestions.</p>
</div>
</article>
</div>
</body>
</html>